# 正規表現からもう逃げない　{ignore=true}

## もくじ　{ignore=true}

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [正規表現とは（ざっくり）](#正規表現とはざっくり)
- [正規表現の用語](#正規表現の用語)
- [正規表現を使いこなす＝「メタ文字」を使いこなす](#正規表現を使いこなすメタ文字を使いこなす)
- [JS正規表現のエスケープシーケンス](#js正規表現のエスケープシーケンス)
- [JS正規表現のフラグ](#js正規表現のフラグ)
- [ネットで拾ったパターン](#ネットで拾ったパターン)

<!-- /code_chunk_output -->

## 正規表現とは（ざっくり）
- 文字列のパターンマッチングという問題に対して、パターンを記述する記法（言語）を用意して、対象文字列とパターンを正規表現エンジンに渡して探させるのが、正規表現を使った問題解決の手法。
- よく応用されるのは「検索」と「置換」
## 正規表現の用語
- パターン：探したい文字列規則のこと
- 入力シーケンス：パターンを探す対象文字列のこと
- マッチ：入力シーケンスの中にパターンが見つかることをいう
## 正規表現を使いこなす＝「メタ文字」を使いこなす
- リテラル文字
  - パターンのなかに直接書いた文字。StringクラスのindexOfメソッドと同程度の威力しか発揮しない
- メタ文字
  - 色々できるっぽい。
  - メタ文字に使う記号をメタ記号扱いしたくない場合はバックスラッシュ`\`でエスケープする。

  |メタ文字|意味
  |---|---
  |`.`|任意の１文字
  |`\s`|空白文字
  |`\S`|非空白文字
  |`\w`|単語構成文字（英数字とアンダースコア文字）
  |`\W`|非単語構成文字
  |`\d`|数字
  |`\D`|数字以外の文字
  |`\b`|単語境界
  |`\B`|非単語境界
  |`^`|行頭
  |`$`|行末
  |`X?`|Xの０文字または１文字の繰り返し
  |`X??`|Xの０文字または１文字の繰り返し（非貪欲）
  |`X*`|Xの０文字以上の繰り返し
  |`X*?`|Xの０文字以上の繰り返し（非貪欲）
  |`X+`|Xの１文字以上の繰り返し
  |`X+?`|Xの１文字以上の繰り返し（非貪欲）
  |`X{n}`|Xのn回の繰り返し
  |`X{n}?`|Xのn回の繰り返し（非貪欲）
  |`X{n,}`|Xのn回以上の繰り返し
  |`X{n,}?`|Xのn回以上の繰り返し（非貪欲）
  |`X{n,m}`|Xのn回からm回の繰り返し
  |`X{n,m}?`|Xのn回からm回の繰り返し（非貪欲）
  |`X|Y`|XまたはY
  |`[XYZ]`|XまたはYまたはZの１文字
  |`[^XYZ]`|XでもYでもZでもない１文字
  |`(X)`|グループ化（参照可能）
  |`\数字`|マッチグループの参照
  |`(?:X)`|グループ化のみ（参照しない）
  |`X(?=Y)`|Xの後にYが続く場合にマッチ
  |`X(?!Y)`|Xの後にYが続かない場合にマッチ

## JS正規表現のエスケープシーケンス

  |特殊文字（エスケープシーケンス）|意味
  |---|---
  |`\n`|改行（LF）
  |`\t`|タブ
  |`\r`|改行（CR）
  |`\f`|フィード
  |`\v`|垂直タブ
  |`\cX`|制御文字。`\cA`は0x01、`\cB`は0x02など
  |`\xXX`|Latin-1のコードポイント（Xは０から９の数値もしくはaからfのアルファベット）
  |`\uXXXX`|Unicodeのコードポイント（Xは０から９の数値もしくはaからfのアルファベット）

## JS正規表現のフラグ

  |フラグ|意味
  |---|---
  |`g`|グローバルマッチ。
  |`i`|英字の大文字小文字を無視（ignore）。
  |`m`|マルチライン。`^`と`$`がそれぞれ改行の先頭や末尾にもマッチする様になる。

## ネットで拾ったパターン
[フォームバリデーションで使える正規表現まとめ](https://designsupply-web.com/media/knowledgeside/1640/)
```js
// 【名前】全角文字で入力されているか
pattern = /^[ぁ-んァ-ヶー一-龠]+$/

// 【ふりがな】全角ひらがなで入力されているか
pattern = /^[あ-ん゛゜ぁ-ぉゃ-ょー「」、]+$/

// 【フリガナ】全角カタカナで入力されているか
// 限定させるには文頭（^）と文末（$）で挟んでおく
// 挟まなかったら、先頭から一部分一致した文字列がマッチしてしまう
pattern = /^[ア-ン゛゜ァ-ォャ-ョー「」、]+$/

// 【フリガナ】半角カタカナで入力されているか
pattern = /^[ｱ-ﾝﾞﾟｧ-ｫｬ-ｮｰ｡｢｣､]+$/

// 【【メールアドレス】アットマークを含む正しい形式で入力されているか
pattern = /^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/


// 【【電話番号】半角数字で入力されているか
pattern = /^[0-9]+$/

// 【電話番号】半角ハイフンを含んだ1〜4桁・1〜4桁・3〜4桁の半角数字の形式で入力されているか
pattern = /^0\d{1,4}-\d{1,4}-\d{3,4}/

// 【【URL】http://もしくはhttps://から始まる正しい形式で入力されているか
pattern = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?/

// 【ユーザー名など】半角英数字で入力されているか
pattern = /^[a-zA-Z0-9]+$/

// 【テキスト入力】n文字以上m文字以下で入力されているか
pattern = /^.{1,3}$/ // 1文字以上3文字以下

// 【テキスト入力】HTMLタグが含まれているか
// \number: マッチグループの参照
pattern = /[<(.*)>.*<\/\1>]/


```

 








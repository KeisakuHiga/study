# ゼロからわかる AWS 超入門

## ルートユーザーアカウントは特別な時だけ使うようにしよ

ルートユーザーは AWS への全ての操作権限を保有することから万が一漏洩してしまったときはえらいことになる。。。

だから、普段使いのアカウントを作っておいて、特別な時だげルートユーザーを使った方がセキュリティ的にいい！

## AWS の操作をできるユーザーを IAM ユーザーという

AWS の各リソースに対する操作を「アクション」というけど、このアクションベースで IAM ユーザーの権限を設定していたら煩雑。。。だから「ポリシー」をベースに権限設定を行う。ポリシーっていうのは、アクションをグループ化したもの。

このポリシーは AWS 側から提供されているものがあって、各リソース毎に一般的な操作権限に関わる設定を簡単に実施することができる。

IAM ユーザーの他に、IAM グループと IAM ロールがある。

- IAM グループ：IAM ユーザーをグループ化して権限設定する概念。複数ユーザーに対して、同じ権限設定をしたい時に使う。
- IAM ロール：AWS のリソースに対するアカウント。例えば、EC2 から S3 にアクセス権限を付与する際に、IAM ロールだと楽に権限設定ができるようになる。

## 管理者ユーザーを作成してみよう

1. IAM ダッシュボードへ
1. 「ユーザー」メニューを選択
1. 「ユーザーを追加」を押下
1. ユーザー名を入力
1. アクセスの種類を選択
1. プログラムによるアクセス  
   API などから AWS を操作する際に必要な「アクセスキー」や「シークレットアクセスキー」を発行する時はチェック入れておく。漏洩すると大変！不要ならチェック外して OK。後からでも作成できる。
1. AWS マネジメントコンソールへのアクセス
1. まずはこっちチェック入れる
1. コンソールのパスワードは自動生成パスワードにチェック
1. パスワードリセットが必要にもチェック
1. 次のステップへ
1. ユーザーを追加
1. ３つあるが、今回は「既存のポリシーを直接アタッチ」を選択
1. ポリシーは一番上にある「AdministratorAccess」を選択
1. 次のステップへ
1. タグの追加はしてもしなくても OK
1. 内容を確認して、「ユーザーの作成」押下

作成できたら、仮パスワードが自動生成されているから、それを手元に控えておくか、CSV をダンロードしておく。AWS アカウント ID とユーザー名と仮パスワードを入力して初回ログイン、パスワード初期設定できたら完了！AWS アカウント ID がわからない場合は[ここ参照する](https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/console_account-alias.html)。

## セキュリティステータス

実運用を開始する場合、IAM ダッシュボードでは、セキュリティ上、以下の５つのことを設定する必要があるらしい。実験的な場合は１と３が最低限の設定。

1. ルートアクセスキーの削除
1. ルートアカウントの MFA を有効化
1. 個々の IAM ユーザーの作成
1. グループを使用してアクセス許可を割り当て
1. IAM パスワードポリシーの適用
